% !TEX root = ./CCC_Note.tex
\chapter{Introduction}

Traced symmetric monoidal categories have been used to model processes with feedback (\url{http://arxiv.org/pdf/1401.5113v1.pdf})  or operators with fixed points (\url{http://arxiv.org/pdf/1107.6032.pdf}). A graphical calculus for TSMCs was developed by Joyal, Street, and Verity, in which string diagrams of the form
\begin{center}
\activetikz{
	%little box 1
	\path(2,1.5);
	\blackbox{(2,2)}{2}{1}{$X_1$}{.5}
	%little box 2
	\path(6,1.5);
	\blackbox{(2,2)}{2}{2}{$X_2$}{.5}
	%wires
	\directarc{(4.25,2.5)}{(5.75,2.16667)} % X_1 -> X_2
	\directarc{(0.35,2.833333)}{(1.75,2.83333)} % Y -> X_1
	\fancyarc{(0.35,4)}{(5.75,2.83333)}{-35}{16} % Y -> X_2
	\directarc{(8.25,2.8333)}{(9.65,2.83333)} % X_2 -> Y
	\fancyarc{(1.75,2.16667)}{(8.25,2.16667)}{20}{-45} % X_2 -> X_1
}
\end{center}
represent compositions, i.e., new morphisms are constructed from old by specifying which outputs will be fed back into which inputs. In fact, these generalize Penrose diagrams in $\Cat{Vect}$, and the word \emph{traced} originates in vector space terminology.  

But notice that the above picture has another interpretation, in terms of 1-dimensional cobordisms between oriented 0-manifolds. The box $X$ in the picture includes only the data of two finite sets $(\inp{X},\outp{X})$, here $(blah,blah)$. Thus each box encodes a signed set, which can be interpreted as an oriented 0-manifold. A string diagram, in which boxes $X_1,\ldots,X_n$ are wired together inside a larger box $Y$, can be interpreted as a cobordism from $X_1\sqcup\cdots\sqcup X_n$ to $Y$. 

There is actually a bit more data in a string diagram for a TSMC $\cat{C}$; namely, each wire is labeled by an object of $\cat{C}$. We will thus consider the category $\Cat{Cob}/Lbl$ of oriented 1-dimensional cobordisms over a fixed set $Lbl$ of labels. 

We record these two interpretations of string diagrams in the table below. Note the ``degree shift" between the second and third columns.
\begin{center}
% \begin{tabular}{| l | l | l |}
% \hline
% \multicolumn{3}{|c|}{Interpretations of string diagrams}\\\hline
% String diagram & Traced category $\cat{C}$ & $\Cat{Cob}/Lbl$\\\bhline
% Wire label set, $Lbl$&Objects, $Lbl:=\Ob(\cat{C})$&Label set, $Lbl$\\
% Box & Morphism & Object (oriented 0-mfd over $Lbl$)\\
% String diagram & Composition & Morphism (Cobordism over $Lbl$)\\
% Nesting & Axioms of TSMCs & Composition\\\hline
% \end{tabular}
\begin{tabular}{lll}
\toprule
\multicolumn{3}{c}{Interpretations of string diagrams} \\
\midrule
String diagram & Traced category $\cat{C}$ & $\Cat{Cob}/Lbl$ \\
\midrule
Wire label set, $Lbl$ & Objects, $Lbl:=\Ob(\cat{C})$ & Label set, $Lbl$ \\
Box & Morphism & Object (oriented 0-mfd over $Lbl$) \\
String diagram & Composition & Morphism (Cobordism over $Lbl$) \\
Nesting & Axioms of TSMCs & Composition \\
\bottomrule
\end{tabular}
\end{center}

The relationship between these interpretations is made precise in the following first main theorem, which will be proved in Section~\ref{3}.
\begin{theorem}\label{thm:traced as cob-alg}
Consider the functor $\op\Set\to\Cat{Cat}$, given by $Lbl\mapsto(\Cat{Cob}/Lbl)\alg$, and let $(\Cat{Cob}/\bullet)\alg\to\Set$ denote the corresponding split Grothendieck fibration. Then there is an equivalence of categories
$$\Cat{TSMC}\simeq(\Cat{Cob}/\bullet)\alg.$$
\end{theorem}

We sketch the connection, with a few minor abuses of notation, as follows. Recall that a $(\Cat{Cob}/Lbl)$-algebra is a lax functor $P\colon\Cat{Cob}/Lbl\to\Cat{Set}$. Once a set $Lbl$ is established, specifying a traced category $\cat{C}$ with objects $Lbl$ requires the same data as specifying a lax functor $P$. First, for each box $(\inp{X},\outp{X})$ in a string diagram, both $\cat{C}$ and $P$ require a set, $\Hom_{\cat{C}}(\inp{X},\outp{X})$ and $P(\inp{X},\outp{X})$, respectively.  Second, for each string diagram, both $\cat{C}$ and $P$ require a function: a formula for composition and trace, in the case of $\cat{C}$, and an action on morphisms, in the case of $P$. The fact that $\cat{C}$ satisfies the axioms of traced symmetric monoidal categories corresponds to checking the functoriality of $P$.

\section{Generalization: lax algebras on a traced or compact category}

\begin{theorem}
 Let $\cat{C}$ be a compact closed category and $\cat{V}$ a symmetric monoidal category.  The category $\Lax(\cat{C},\cat{V})$ of lax monodical functors is equivalent to the coslice category $\cat{C}/(\cat{V}-\Cat{CompCat})$ spanned by bijective on objects functors.
\end{theorem}

\begin{corollary}
If $\cat{C}=Int\cat{D}$, then $\Lax(\cat{C},\cat{V})$ is equivalent to the coslice category $\cat{C}/(\cat{V}-\Cat{TracedCat})$ with boo.
\end{corollary}

Theorem~\ref{thm:traced as cob-alg} follows from this corollary, because $\Cat{Cob}/Lbl$ is Int of the free traced category on a set of objects $Lbl$, so....

\begin{corollary}
 $\Lax(\Int(\cat{T}),\cat{V})=\cat{V}-\Cat{TSMC}_{\cat{T}/}$
\end{corollary}

\section[Applications of the cobordism-algebra perspective]{Applications of the cobordism-algebra perspective in engineering design}

When designing or investigating a complex system, it is often useful to think in terms of interacting subsystems, put together to make a larger whole. This is often called \emph{compositionality}.

Thinking of this as processes wired together to make larger processes has and Rupel were originally motivated to formalize the operadic nature of compositionality. This led to the notion of wiring diagrams and their algebras, as discussed in previous work \cite{Spivak}, \cite{Rupel-Spivak}, \cite{Vagner-Spivak-Lerman}. 
 

When drawing 0-manifolds as boxes and cobordisms as string diagrams, composition of cobordisms become nested diagrams.
\begin{figure}[hb]
\activetikz{
	%left large box,
	\node at (.5,2.7){$X\xrightarrow{\Phi}Y\xrightarrow{\Psi}Z$};
	\node at (.5,1.15){\tiny $\alpha$};
	\node at (.2,2.05){\tiny $\beta$};
	\path(-1,0);\blackbox{(3,2.4)}{1}{2}{}{.5}
	%left small boxes (dashed),
	\path(0,1.4);\dashblackbox{(1,.8)}{1}{1}{}{.2}
	\path(0,.3);\dashblackbox{(1,.6)}{1}{2}{}{.2}
	%left outer arcs
	\directarc{(1.1,1.8)}{(1.75,1.6)}
	\directarc{(1.1,.5)}{(1.75,.8)}
	\directarc{(-.75,1.2)}{(-.1,.6)} %this
	\fancyarc{(-.1,1.8)}{(1.1,.7)}{10}{0}
	%left inner arcs, top
	\fancyarc{(.283,1.817)}{(.716,1.817)}{4}{5}
	\directarc{(.1,1.8)}{(.283,1.733)}
	\directarc{(.716,1.733)}{(.9,1.8)}
	%left inner arcs, bottom
	\directarc{(.1,.6)}{(.6,.75)}
	\directarc{(.85,.725)}{(.9,.7)}
	\directarc{(.55,.55)}{(.6,.7)}
	%\directarc{(.1,.5)}{(.2,.525)}
	\directarc{(.55,.5)}{(.9,.5)}
	%left tiny boxes,
	\path(0.333,1.65);\blackbox{(.333,.25)}{2}{2}{}{.1}
	\path(0.65,.65);\blackbox{(.15,.15)}{2}{1}{}{.1}
	\path(0.35,.45);\blackbox{(.15,.15)}{0}{2}{}{.1} %this
	%right large box,
	\node at (4.5,2.7){$X\xrightarrow{\Psi\circ\Phi}Z$};
	\node at (4.5,1.12){\tiny $\alpha$};
	\node at (4.2,2.05){\tiny $\beta$};
	\path(3,0);\blackbox{(3,2.4)}{1}{2}{}{.5}
	%right tiny boxes,
	\path(4.333,1.65);\blackbox{(.333,.25)}{2}{2}{}{.1}
	\path(4.65,.65);\blackbox{(.15,.15)}{2}{1}{}{.1}
	\path(4.25,.45);\blackbox{(.15,.15)}{0}{2}{}{.1}
	%right arcs, between
	\fancyarc{(4.283,1.733)}{(4.85,.725)}{10}{0}
	%right arcs, top
	\fancyarc{(4.283,1.817)}{(4.716,1.817)}{4}{5}
	\directarc{(4.716,1.733)}{(5.75,1.6)}
	%right arcs, bottom
	\directarc{(3.25,1.2)}{(4.6,.75)}
	\directarc{(4.45,.55)}{(4.6,.7)}
	\directarc{(4.45,.5)}{(5.75,.8)}
	%\fancyarc{(4.2,.525)}{(4.45,.5)}{5}{-5}
}
\end{figure}
A commutative square in $\Cat{1-Cob}$ corresponds to finding two different ways to chunk small boxes inside a big box. The functoriality of $P\colon\Cat{1-Cob}\to\Set$ can be thought of as ensuring that any two ways to chunk boxes gives the same result.

\section{Acknowledgments}

Thanks go to Steve Awodey and Ed Morehouse for suggesting we formally connect our operad-algebra picture to the traced one. 

\chapter{Wiring Diagrams and $\Cat{1-Cob}$}

In this section, we more carefully explain the equivalence between the category of traced categories and the category of cobordism algebras.

\section{Objects in $\Cat{1-Cob}$ as interfaces}

The objects in $\Cat{1-Cob}$ are signed sets $(\inp{X},\outp{X})$, each of which can be drawn as a box with input wires $\inp{X}$ drawn entering the box, on its left, and output wires $\outp{X}$ drawn exiting the box, on its right. We call the latter style \emph{an interface}.

\begin{figure}
\activetikz{
\draw (0,2) node {$-$};
\draw(0,1.5) node {$-$};
\draw(0,1) node {$-$};
\draw(0,.5) node {$+$};
\draw(0,0) node {$+$};
\path(5,0);
\blackbox{(2,2)}{3}{2}{$X$}{.5}
}
\caption{The signed set $(\ul{3},\ul{2})$, drawn in the usual style and as an interface.}
\end{figure}

\section{Morphisms in $\Cat{1-Cob}$ as wiring diagrams}

Wiring diagrams are a new way to visualize morphisms in 1-Cob.
\begin{center}
\activetikz{
    %big box
	\path(0,0);
	\blackbox{(10,5)}{2}{1}{$Y$}{.7}
	    %inner wires
	        \node at (.4,3.6) {\tiny $\inp{Y}_{a}$};
	        \node at (.4,1.9) {\tiny $\inp{Y}_{b}$};
	    %outer wire
	        \node at (9.6,2.75) {\tiny $\outp{Y}_a$};
	%little box 1
	\path(2,1.5);
	\blackbox{(2,2)}{2}{1}{$X_1$}{.5}
	    %tank info
	    %inner wires
	        \node at (1.75,3.03) {\tiny $\inp{X}_{1a}$};
	        \node at (1.75,2.35) {\tiny $\inp{X}_{1b}$};
	    %outer wire
	        \node at (4.33,2.68) {\tiny $\outp{X}_{1a}$};
	%little box 2
	\path(6,1.5);
	\blackbox{(2,2)}{2}{2}{$X_2$}{.5}
	    %tank info
	    %inner wires
	        \node at (5.75,3.03) {\tiny $\inp{X}_{2a}$};
	        \node at (5.75,2.35) {\tiny $\inp{X}_{2b}$};
	    %outer wires
	        \node at (8.33,3.03) {\tiny $\outp{X}_{2a}$};
	        \node at (8.33,2.35) {\tiny $\outp{X}_{2b}$};
	%wires
	\directarc{(4.25,2.5)}{(5.75,2.16667)} % X_1 -> X_2
	\directarc{(0.35,1.6667)}{(1.75,2.83333)} % Y -> X_1
	\fancyarc{(0.35,3.3333)}{(5.75,2.83333)}{-40}{25} % Y -> X_2
	\directarc{(8.25,2.8333)}{(9.65,2.5)} % X_2 -> Y
	\fancyarc{(1.75,2.16667)}{(8.25,2.16667)}{20}{-45} % X_2 -> X_1
}
\end{center}
~\todo{Put these two drawings on one line?}
\begin{center}
\activetikz{
%Left manifolds
\def\factor{.7}
\def\lspace{.7}
\def\bspace{5}
\draw (0,7*\factor) node {$\inp{X}_{1a}$};\draw (\lspace,7*\factor) node {$-$};
\draw(0,6*\factor) node {$\inp{X}_{1b}$};\draw (\lspace,6*\factor) node {$-$};
\draw(0,5*\factor) node {$\outp{X}_{1a}$};\draw (\lspace,5*\factor) node {$+$};
%skip 3 to separate manifolds
\draw(0,3*\factor) node {$\inp{X}_{2a}$};\draw (\lspace,3*\factor) node {$-$};
\draw(0,2*\factor) node {$\inp{X}_{2b}$};\draw (\lspace,2*\factor) node {$-$};
\draw(0,1*\factor) node {$\outp{X}_{2a}$};\draw (\lspace,1*\factor) node {$+$};
\draw(0,0*\factor) node {$\outp{X}_{2b}$};\draw (\lspace,0*\factor) node {$+$};
%Right manifold
\draw (\bspace,6*\factor) node {$\inp{Y}_a$};\draw (\bspace-\lspace,6*\factor) node {$-$};
\draw (\bspace,4*\factor) node {$\inp{Y}_b$};\draw (\bspace-\lspace,4*\factor) node {$-$};
\draw (\bspace,2*\factor) node {$\outp{Y}_a$};\draw (\bspace-\lspace,2*\factor) node {$+$};
%Arcs
\draw (1.3*\lspace,6*\factor) .. controls (3*\lspace,6*\factor) and (3*\lspace,0*\factor) .. (1.3*\lspace,0*\factor);
\draw (1.3*\lspace,5*\factor) .. controls (2.5*\lspace,5*\factor) and (2.5*\lspace,2*\factor) .. (1.3*\lspace,2*\factor);
\directarc{(1.3*\lspace,7*\factor)}{(\bspace-1.3*\lspace,4*\factor)}
\directarc{(1.3*\lspace,3*\factor)}{(\bspace-1.3*\lspace,6*\factor)}
\directarc{(1.3*\lspace,1*\factor)}{(\bspace-1.3*\lspace,2*\factor)}
}
\end{center}

\section{$\Cat{1-Cob}$-algebras and applications}

Traced categories are often used to model processes with feedback. The processes correspond to morphisms, each drawn as an interface, and these processes can be strung together in series or parallel, and with feedback, using string diagram notation. Theorem~\ref{thm:traced as cob-alg} says that we can also view string diagrams as morphisms in $\Cat{Cob}$. In this setting, the processes are modeled using an algebra on $\Cat{Cob}$.

References for applications of traced monoidal categories.

References for applications of $\Cat{Cob}$-algebras.

\chapter{Traced Symmetric Monoidal Categories}

Let $(\cat{M},\otimes,I)$ be a symmetric monoidal category where for any $X,Y\in\Ob(\cat{M})$ we write $\gamma_{X,Y}:X\otimes Y\To{\sim} Y\otimes X$ for the distinguished symmetry isomorphisms. Recall that we have $\gamma_{Y,X}=\gamma_{X,Y}^{-1}$.  We define the {\em monoid of scalars in $\cat{M}$} to be the set $S_{\cat{M}}:=\Hom(I,I)$ with multiplication given by composition.  Note that $S_{\cat{M}}$ is commutative since $\cat{M}$ is symmetric.  There is an action of $S_{\cat{M}}$ on the set $\Hom_{\cat{M}}(X,Y)$ for each $(X,Y)\in\Ob(\cat{M}^{op}\times\cat{M})$, where $s\in S_{\cat{M}}$ acts on a morphism $f\colon X\to Y$ by sending it to the composite morphism
$$s\bullet f:X\to I\otimes X\To{s\otimes f}I\otimes Y\to Y.$$
We write $|X|:=\Hom(I,X)$ for the \emph{elements} of $X$.

The functor $|\cdot|=\Hom(I,\cdot)\colon\cat{M}\to\Set$ is a unital \todo{This is just a lax monoidal functor, right?} algebra on $\cat{M}$ with unit map
\[\eta:\{1\}\To{\id_{I}}S_{\cat{M}}\]
and multiplication map
\[\mu:\Hom(I,X)\otimes\Hom(I,X')\to\Hom(I\otimes I,X\otimes X')\iso\Hom(I,X\otimes X').\]

A (left) \emph{trace} on a symmetric monoidal category is a collection of functions 
\[\Tr^U_{X,Y}:\Hom(U\otimes X,U\otimes Y)\to\Hom(X,Y)\]
for $U,X,Y\in\Ob(\cat{M})$ satisfying the following axioms:
\begin{description}
 \item [Dinaturality I:] for every $f:U\otimes X\to V\otimes Y$ and $g:V\to U$ we have
 \[\Tr^U_{X,Y}\Big[\big(g\otimes Y\big)\circ f\Big]=\Tr^V_{X,Y}\Big[f\circ\big(g\otimes X\big)\Big];\] 
 \item [Naturality:] for every $f:U\otimes X\to U\otimes Y$, $g:X'\to X$, and $h:Y\to Y'$ we have
 \[\Tr^U_{X',Y'}\Big[\big(U\otimes h\big)\circ f\circ\big(U\otimes g\big)\Big]=h\circ\Tr^U_{X,Y}\big[f\big]\circ g;\]
 \item [Superposing:] for every $f:U\otimes X\to U\otimes Y$ and $g:W\to Z$ we have
 \[\Tr^U_{X,Y}\big[f\big]\otimes g=\Tr^U_{X\otimes W,Y\otimes Z}\big[f\otimes g\big];\]
 \item [Vanishing I:] for every $f:X\to Y$ we have
 \[\Tr^{I}_{X,Y}\big[f\big]=f;\]
 \item [Vanishing II:] for every $f:U\otimes V\otimes X\to U\otimes V\otimes Y$ we have
 \[\Tr^{U\otimes V}_{X,Y}\big[f\big]=\Tr^V_{X,Y}\Big[\Tr^U_{V\otimes X,V\otimes Y}\big[f\big]\Big];\]
 \item [Yanking:] for any $X\in\Ob(\cat{M})$ we have
 \[\Tr^X_{X,X}\big[\gamma_{X,X}\big].\]
\end{description}

For an object $X$ in a traced symmetric monoidal category $\cat{M}$ we write $\dim(X):=\Tr^X_{I,I}\big[\id_X\big]\in S_{\cat{M}}$ for the {\em dimension} of $X$.  Note also that for any endomorphism $f:X\to X$ there is a scalar $s_f=\Tr^X_{I,I}[f]\in S_{\cat{M}}$.

\begin{proposition}\label{prop:dinaturality}\mbox{}
Let $\cat{M}$ be a symmetric monoidal category.
\begin{enumerate}
 \item If $\cat{M}$ is traced then for every $f:X\to Y$ and $g:Y\to Z$ in $\cat{M}$, we have
 \[g\circ f=\Tr^Y_{X,Z}\Big[\big(f\otimes g\big)\circ\gamma_{Y,X}\Big].\]
 \item Consider the following axiom:
 \begin{description}
  \item [Dinaturality I':] for every $h:U\otimes V\otimes X\to U\otimes V\otimes Y$ we have
 \[\Tr^{U\otimes V}_{X,Y}\big[h\big]=\Tr^{V\otimes U}_{X,Y}\Big[\big(\gamma_{U,V}\otimes Y\big)\circ h\circ\big(\gamma_{V,U}\otimes X\big)\Big].\]
 \end{description}
 In the presence of the other five Axioms, the axioms Dinaturality~I and Dinaturality~I' are equivalent.
\end{enumerate}
\end{proposition}
\begin{proof}
 (1) can be shown from the Naturality and Yanking axioms of the trace as follows:
 \begin{align*}
  \Tr^Y_{X,Z}\Big[\big(f\otimes g\big)\circ\gamma_{Y,X}\Big]
  &=\Tr^Y_{X,Z}\Big[\big(Y\otimes g\big)\circ\big(f\otimes Y\big)\circ\gamma_{Y,X}\Big]=\Tr^Y_{X,Z}\Big[\big(Y\otimes g\big)\circ\gamma_{Y,Y}\circ\big(Y\otimes f\big)\Big]\\
  &=g\circ\Tr^Y_{Y,Y}\big[\gamma_{Y,Y}\big]\circ f=g\circ f.
 \end{align*}
 
 Dinaturality I' is an immediate consequence of Dinaturality I, indeed apply Dinaturality I with $f=h\circ\big(\gamma_{V,U}\otimes X\big)$ and $g=\gamma_{U,V}$.  For the other direction we apply the composition formula of (1) to the left side of the Dinaturality I equation to get
 \begin{align*}
  \Tr^U_{X,Y}\Big[\big(g\otimes Y\big)\circ f\Big]
  &=\Tr^U_{X,Y}\bigg[\Tr^{V\otimes Y}_{U\otimes X,U\otimes Y}\Big[\big(f\otimes g\otimes Y\big)\circ\gamma_{V\otimes Y,U\otimes X}\Big]\bigg]\\
 &=\Tr^{V\otimes Y\otimes U}_{X,Y}\Big[\big(f\otimes g\otimes Y\big)\circ\gamma_{V\otimes Y,U\otimes X}\Big]\\
  &=\Tr^{V\otimes Y\otimes U}_{X,Y}\Big[\big(f\otimes g\otimes Y\big)\circ\gamma_{V\otimes Y,U\otimes X}\Big]\circ\Tr^X_{X,X}\big[\gamma_{X,X}\big],
 \end{align*}
 where the last two equalities follow from Vanishing II and a trivial application of Yanking.  
 
 By Naturality we may bring the first trace into the second to get
 \begin{align*}
  &\Tr^X_{X,Y}\Bigg[\bigg(X\otimes \Tr^{V\otimes Y\otimes U}_{X,Y}\Big[\big(f\otimes g\otimes Y\big)\circ\gamma_{V\otimes Y,U\otimes X}\Big]\bigg)\circ\gamma_{X,X}\Bigg]\\
  &\quad=\Tr^X_{X,Y}\Bigg[\gamma_{Y,X}\circ\bigg(\Tr^{V\otimes Y\otimes U}_{X,Y}\Big[\big(f\otimes g\otimes Y\big)\circ\gamma_{V\otimes Y,U\otimes X}\Big]\otimes X\bigg)\Bigg]\\
  &\quad=\Tr^X_{X,Y}\bigg[\gamma_{Y,X}\circ\Tr^{V\otimes Y\otimes U}_{X\otimes X,Y\otimes X}\Big[\big(f\otimes g\otimes Y\otimes X\big)\circ\big(\gamma_{V\otimes Y,U\otimes X}\otimes X\big)\Big]\bigg]\\
  &\quad=\Tr^X_{X,Y}\bigg[\Tr^{V\otimes Y\otimes U}_{X\otimes X,X\otimes Y}\Big[\big(V\otimes Y\otimes U\otimes \gamma_{Y,X}\big)\circ\big(f\otimes g\otimes Y\otimes X\big)\circ\big(\gamma_{V\otimes Y,U\otimes X}\otimes X\big)\Big]\bigg]\\
  &\quad=\Tr^X_{X,Y}\bigg[\Tr^{V\otimes Y\otimes U}_{X\otimes X,X\otimes Y}\Big[\big(f\otimes g\otimes \gamma_{Y,X}\big)\circ\big(\gamma_{V\otimes Y,U\otimes X}\otimes X\big)\Big]\bigg]\\
  &\quad=\Tr^{V\otimes Y\otimes U\otimes X}_{X,Y}\Big[\big(f\otimes g\otimes \gamma_{Y,X}\big)\circ\big(\gamma_{V\otimes Y,U\otimes X}\otimes X\big)\Big],
 \end{align*}
 where we apply Superposing to get the second equality, Naturality to get the third, and Vanishing II for the last.
 
 Now we are ready to apply Dinaturality I' to get
 \begin{align*}
  \Tr^{U\otimes X\otimes V\otimes Y}_{X,Y}\Big[\big(\gamma_{V\otimes Y,U\otimes X}\otimes Y\big)\circ\big(f\otimes g\otimes \gamma_{Y,X}\big)\Big]
 \end{align*}
 from which we may apply, in reverse, an analogous sequence of equalities to that above to get the right hand side of the Dinaturality I equation.
 \erase{\begin{align*}%begin erase
  &=\Tr^Y_{X,Y}\bigg[\Tr^{U\otimes X\otimes V}_{Y\otimes X,Y\otimes Y}\Big[\big(\gamma_{V\otimes Y,U\otimes X}\otimes Y\big)\circ\big(f\otimes g\otimes \gamma_{Y,X}\big)\Big]\bigg]\\
  &=\Tr^Y_{X,Y}\bigg[\Tr^{U\otimes X\otimes V}_{Y\otimes X,Y\otimes Y}\Big[\big(\gamma_{V\otimes Y,U\otimes X}\otimes Y\big)\circ\big(f\otimes g\otimes X\otimes Y\big)\circ\big(U\otimes X\otimes V\otimes \gamma_{Y,X}\big)\Big]\bigg]\\
  &=\Tr^Y_{X,Y}\bigg[\Tr^{U\otimes X\otimes V}_{X\otimes Y,Y\otimes Y}\Big[\big(\gamma_{V\otimes Y,U\otimes X}\otimes Y\big)\circ\big(f\otimes g\otimes X\otimes Y\big)\Big]\circ\gamma_{Y,X}\bigg]\\
  &=\Tr^Y_{X,Y}\Bigg[\bigg(\Tr^{U\otimes X\otimes V}_{X,Y}\Big[\gamma_{V\otimes Y,U\otimes X}\circ\big(f\otimes g\otimes X\big)\Big]\otimes Y\bigg)\circ\gamma_{Y,X}\Bigg]\\
  &=\Tr^Y_{X,Y}\Bigg[\gamma_{Y,Y}\circ\bigg(Y\otimes\Tr^{U\otimes X\otimes V}_{X,Y}\Big[\gamma_{V\otimes Y,U\otimes X}\circ\big(f\otimes g\otimes X\big)\Big]\bigg)\Bigg]\\
  &=\Tr^Y_{Y,Y}\big[\gamma_{Y,Y}\big]\circ\Tr^{U\otimes X\otimes V}_{X,Y}\Big[\gamma_{V\otimes Y,U\otimes X}\circ\big(f\otimes g\otimes X\big)\Big]\\
  &=\Tr^{U\otimes X\otimes V}_{X,Y}\Big[\gamma_{V\otimes Y,U\otimes X}\circ\big(f\otimes g\otimes X\big)\Big]\\
  &=\Tr^{U\otimes X\otimes V}_{X,Y}\Big[\big(g\otimes X\otimes f\big)\circ\gamma_{U\otimes X,V\otimes X}\Big]\\
  &=\Tr^V_{X,Y}\bigg[\Tr^{U\otimes X}_{V\otimes X,V\otimes Y}\Big[\big(g\otimes X\otimes f\big)\circ\gamma_{U\otimes X, V\otimes X}\Big]\bigg]\\
  &=\Tr^V_{X,Y}\Big[f\circ\big(g\otimes X\big)\Big].
 \end{align*}}%end erase
 %%Another proof
 \erase{By Dinaturality I' this becomes%begin erase
 \[\Tr^U_{X,Y}\bigg[\Tr^{Y\otimes V}_{U\otimes X,U\otimes Y}\Big[\big(\gamma_{V,Y}\otimes U\otimes Y\big)\circ\big(f\otimes g\otimes Y\big)\circ\gamma_{V\otimes Y,U\otimes X}\circ\big(\gamma_{Y,V}\otimes U\otimes X\big)\Big]\bigg]\]
 which is equal via Vanishing II and Naturality to
 \begin{align*}
  &\Tr^U_{X,Y}\Bigg[\Tr^V_{U\otimes X,U\otimes Y}\bigg[\Tr^Y_{V\otimes U\otimes X,V\otimes U\otimes Y}\Big[\big(\gamma_{V,Y}\otimes U\otimes Y\big)\circ\big(f\otimes g\otimes Y\big)\circ\gamma_{V\otimes Y,U\otimes X}\circ\big(\gamma_{Y,V}\otimes U\otimes X\big)\Big]\bigg]\Bigg]\\
  &\quad=\Tr^{V\otimes U}_{X,Y}\bigg[\Tr^Y_{V\otimes U\otimes X,V\otimes U\otimes Y}\Big[\big(Y\otimes V\otimes g\otimes Y\big)\circ\big(\gamma_{V,Y}\otimes V\otimes Y\big)\circ\gamma_{V\otimes Y,V\otimes Y}\circ\big(\gamma_{Y,V}\otimes V\otimes Y\big)\circ\big(Y\otimes V\otimes f\big)\Big]\bigg]\\
  &\quad=\Tr^{V\otimes U}_{X,Y}\bigg[\big(V\otimes g\otimes Y\big)\circ\Tr^Y_{V\otimes V\otimes Y,V\otimes V\otimes Y}\Big[\big(\gamma_{V,Y}\otimes V\otimes Y\big)\circ\gamma_{V\otimes Y,V\otimes Y}\circ\big(\gamma_{Y,V}\otimes V\otimes Y\big)\Big]\circ\big(V\otimes f\big)\bigg]\\
  &\quad=\Tr^{V\otimes U}_{X,Y}\bigg[\big(V\otimes g\otimes Y\big)\circ\big(\gamma_{V,V}\otimes Y\big)\circ\big(V\otimes f\big)\bigg].
 \end{align*}
 Applying Dinaturality I' again we get
 \begin{align*}
  &\Tr^{U\otimes V}_{X,Y}\bigg[\big(\gamma_{V,U}\otimes Y\big)\circ\big(V\otimes g\otimes Y\big)\circ\big(\gamma_{V,V}\otimes Y\big)\circ\big(V\otimes f\big)\circ\big(\gamma_{U,V}\otimes X\big)\bigg]\\
  &=\Tr^{U\otimes V}_{X,Y}\bigg[\big(g\otimes f\big)\circ\big(\gamma_{U,V}\otimes X\big)\bigg]\\
  &=\Tr^{U\otimes V}_{X,Y}\bigg[\big(U\otimes f\big)\circ\big(\gamma_{U,U}\otimes X\big)\circ\big(U\otimes g\otimes X\big)\bigg]\\
  &=\Tr^{U\otimes V}_{X,Y}\bigg[\big(U\otimes f\big)\circ\Tr^X_{U\otimes U\otimes X,U\otimes U\otimes X}\Big[\big(\gamma_{U,X}\otimes U\otimes X\big)\circ\gamma_{U\otimes X, U\otimes X}\circ\big(\gamma_{X,U}\otimes U\otimes X\big)\Big]\circ\big(U\otimes g\otimes X\big)\bigg]
 \end{align*}
 Now using Naturality and Vanishing II we get
 \begin{align*}
  &\Tr^{U\otimes V}_{X,Y}\bigg[\Tr^X_{U\otimes V\otimes X,U\otimes V\otimes Y}\Big[\big(X\otimes U\otimes f\big)\circ\big(\gamma_{U,X}\otimes U\otimes X\big)\circ\gamma_{U\otimes X, U\otimes X}\circ\big(\gamma_{X,U}\otimes U\otimes X\big)\circ\big(X\otimes U\otimes g\otimes X\big)\Big]\bigg]\\
  &=\Tr^V_{X,Y}\Bigg[\Tr^U_{V\otimes X,V\otimes Y}\bigg[\Tr^X_{U\otimes V\otimes X,U\otimes V\otimes Y}\Big[\big(\gamma_{U,X}\otimes V\otimes Y\big)\circ\big(g\otimes X\otimes f\big)\circ\gamma_{U\otimes X, V\otimes X}\circ\big(\gamma_{X,U}\otimes V\otimes X\big)\Big]\bigg]\Bigg]\\
  &=\Tr^V_{X,Y}\bigg[\Tr^{X\otimes U}_{V\otimes X,V\otimes Y}\Big[\big(\gamma_{U,X}\otimes V\otimes Y\big)\circ\big(g\otimes X\otimes f\big)\circ\gamma_{U\otimes X, V\otimes X}\circ\big(\gamma_{X,U}\otimes V\otimes X\big)\Big]\bigg]
 \end{align*}
 which by Dinaturality I' is equal to
 \[\Tr^V_{X,Y}\bigg[\Tr^{U\otimes X}_{V\otimes X,V\otimes Y}\Big[\big(g\otimes X\otimes f\big)\circ\gamma_{U\otimes X, V\otimes X}\Big]\bigg],\]
 but this is exactly the composition formula applied to the right hand side of Dinaturality I.}%end erase
\end{proof}

For a traced symmetric monoidal category $\cat{M}$ let $\widetilde{\cat{M}}=\Int(\cat{M})$ denote the category with objects given by pairs $(X_-,X_+)$ where $X_-,X_+\in \Ob(\cat{M})$ and morphisms given by 
\[\Hom_{\widetilde{\cat{M}}}\big((X_-,X_+),(Y_-,Y_+)\big)=\Hom_{\cat{M}}(X_-\otimes Y_+,X_+\otimes Y_-).\]
For morphisms $\Phi:(X_-,X_+)\to(Y_-,Y_+)$ and $\Psi:(Y_-,Y_+)\to(Z_-,Z_+)$ in $\widetilde{\cat{M}}$ we define their composition to be
\[\Psi\circ\Phi:=\Tr^{Y_+}_{X_-\otimes Z_+,X_+\otimes Z_-}\Big[\big(\gamma_{X_+,Y_+}\otimes Z_-\big)\circ\big(X_+\otimes\Psi\big)\circ\big(\Phi\otimes Z_+\big)\circ\big(\gamma_{Y_+,X_-}\otimes Z_+\big)\Big].\]
It is well known that $\widetilde{\cat{M}}$ is a compact closed category whose tensor is given by
\[(X_-,X_+)\odot(Y_-,Y_+):=(X_-\otimes Y_-,X_+\otimes Y_+)\]
with unit object $\tilde I:=(I,I)$ and duality $(X_-,X_+)^\vee:=(X_+,X_-)$.  The following is immediate from the definitions.

\begin{lemma}

Let $\cat{M}$ be a traced symmetric monoidal category.  Then for any object $(X_-,X_+)\in\Ob\big(\widetilde{\cat{M}}\big)$ there is a canonical bijection
\[|(X_-,X_+)|\iso\Hom_{\cat{M}}(X_-,X_+).\]

\end{lemma}

\section{Free Constructions}

To continue we recall the constructions of various free monoidal structures on a category $\cat{C}$ following \cite{abramsky}.  These are defined inductively by successively including additional structure into the constructions.

The objects of the free monoidal category $F_M(\cat{C})$ are lists of objects in $\cat{C}$ with componentwise morphisms.  More formally the objects are pairs $(n,X)$ where $n\in\NN$ and $X$ is a map $X\colon[n]\to \Ob\cat{C}$ and a morphism $f:(n,X)\to(m,Y)$ exists if and only if $n=m$ in which case $f\in\prod_{i=1}^n\Hom_{\cat{C}}(X_i,Y_i)$ with compositions formed as expected.  The tensor product is given by concatenation of lists, i.e. $(n,X)\otimes(m,Y)=(n+m,X+Y)$, with tensor unit $(0,!)$ where $!$ is the unique function from the empty set.

The objects of the free symmetric monoidal category $F_{SM}(\cat{C})$ are again lists of objects in $\cat{C}$, however morphisms now come equipped with a permutation.  More formally, a morphism from $(n,X)$ to $(n,Y)$ is a pair $(f,\pi)$ where $f\in\prod_{i=1}^n\Hom_{\cat{C}}(X_i,Y_{\pi(i)})$ and $\pi\in S(n)$ is a permutation which by abuse of notation can be thought of as an isomorphism $\pi:Y_1\otimes\cdots\otimes Y_n\To{sim} Y_{\pi(1)}\otimes\cdots\otimes Y_{\pi(n)}$.  The composition of morphisms is given by $(\sigma,g)\circ(\pi,f)=\Big(\sigma\circ\pi,\otimes_{i=1}^n (g_{\pi(i)}\circ f_i)\Big)$ and the tensor is given by $(\pi,f)\otimes(\sigma,g)=(\pi\otimes\sigma,f\otimes g)$.  


\section{Definition of functors between $\Cat{TSMC}$ and $\Cat{Cob}/\cat{O}$-algebras}

Let $\cat{M}$ be a traced symmetric monoidal category with objects $\cat{O}$. We will define a $\Cat{Cob}/\cat{O}$-algebra $\cat{P}=R(\cat{M})\colon\Cat{Cob}/\cat{O}\to\Cat{Set}$ as follows. For an object $X\in\Ob(\Cat{Cob}/\cat{O})$, set 
$$\cat{P}(X):=\Hom_{\cat{M}}(\vinp{X},\voutp{X}).$$
We next consider morphisms.

Following Proposition~\ref{prop:set theoretic cob1} (borrow notation/setup from Abramsky instead) a morphism $\Phi\colon X\longrightarrow Y$ consists of a typed bijection 
$$\varphi\colon\inp{X}\sqcup \outp{Y}\xrightarrow{\iso}\outp{X}\sqcup \inp{Y},$$ 
together with a typed finite set $S$. Given an element $f\in\cat{P}(X)$ we must construct $\cat{P}(\Phi)(f)\in\cat{P}(Y)$. Let $\dim(\overline{S})=\textnormal{Tr}^{\overline{S}}_{I,I}\big[\id_{\overline{S}}\big]\in\cat{S}_\cat{M}$. Then we use the formula
$$\cat{P}(\Phi)(f):=
\textnormal{Tr}^{\overline{X_+}}_{\overline{Y_-},\overline{Y_+}}\Big[\big(f\otimes\id_{\overline{Y_+}}\big)\circ\overline{\varphi}\Big]
\otimes\dim(\overline{S}).	
$$

\begin{theorem}
 The category $\Cat{TSMC}$ is equivalent to the category of $\Cat{Cob}/\cat{O}$-algebras.
\end{theorem}
\begin{proof}
 
\end{proof}
\begin{corollary}
 Enriched setting?
\end{corollary}


