% -*- root: CCC_Note.tex -*-
\chapter{Preliminaries}

Let $\cat{C}$ and $\cat{D}$ be monoidal categories. Recall that a functor $F\colon\cat{C}\to\cat{D}$ is called \emph{lax monoidal} if it is equipped with a morphism
\[
\begin{tikzcd}
	I_D \rar{\epsilon} & F(I_C)
\end{tikzcd}
\]
and a natural transformation
\[
\begin{tikzcd}
	F(X) \otimes_D F(Y) \rar{\mu_{X,Y}} & F(X\otimes_C Y)
\end{tikzcd}
\]
such that for all $X,Y,Z\in\cat{C}$, the diagram (suppressing associators)
\[
\begin{tikzcd}
	F(X)\otimes F(Y) \otimes F(Z)
		\rar{\id\otimes\mu}
		\dar[swap]{\mu\otimes\id}
	& F(X)\otimes F(Y\otimes Z)
		\dar{\mu} \\
	F(X\otimes Y)\otimes F(Z)
		\rar[swap]{\mu}
	& F(X\otimes Y\otimes Z)
\end{tikzcd}
\]
commutes, and for all $X\in\cat{C}$ the two diagrams
\[
\begin{tikzcd}
	I_D\otimes F(X)
		\dar[swap]{\epsilon\otimes\id}
	& F(X)
		\lar[swap]{l_{F(X)}}
		\dar{F(l_X)} \\
	F(I_C)\otimes F(X)
		\rar[swap]{\mu}
	& F(I_C\otimes X)
\end{tikzcd}
\qquad
\begin{tikzcd}
	F(X) \otimes I_D
		\dar[swap]{\id\otimes\epsilon}
	& F(X)
		\lar[swap]{r_{F(X)}}
		\dar{F(r_X)} \\
	F(X)\otimes F(I_C)
		\rar[swap]{\mu}
	& F(X\otimes I_C)
\end{tikzcd}
\]
commute. If $\epsilon$ and $\mu$ are isomorphisms, then $F$ is \emph{strong}.

If $\cat{C}$ and $\cat{D}$ are symmetric monoidal, then $F$ is a \emph{lax symmetric monoidal functor} if it is lax monoidal, and commutes with the symmetries, in the sense that the diagram
\[
\begin{tikzcd}
	F(X)\otimes F(Y)
		\rar{\sigma}
		\dar[swap]{\mu}
	& F(Y)\otimes F(X)
		\dar{\mu} \\
	F(X\otimes Y)
		\rar[swap]{F(\sigma)}
	& F(Y\otimes X)
\end{tikzcd}
\]
commutes.

If $F$ and $G$ are lax monoidal functors (possibly symmetric), then a natural transformation $\alpha\colon F\to G$ is called a \emph{monoidal transformation} if the diagrams
\[
\begin{tikzcd}
	F(X)\otimes F(Y)
		\rar{\alpha_X\otimes\alpha_Y}
		\dar[swap]{\mu}
	& G(X)\otimes G(Y)
		\dar{\mu} \\
	F(X\otimes Y)
		\rar[swap]{\alpha_{X\otimes Y}}
	& G(X\otimes Y)
\end{tikzcd}
\qquad
\begin{tikzcd}[column sep=tiny]
	{} & I_D \dlar[swap]{\epsilon} \drar{\epsilon} & \\
	F(I_C) \ar{rr}[swap]{\alpha_I} && G(I_C)
\end{tikzcd}
\]
commute.

Let $\SymMonCat$ denote the bicategory of symmetric monoidal categories and strong monoidal functors, and let $\Lax(\cat{C},\cat{D})$ denote the category of lax monoidal functors and monoidal transformations from $\cat{C}$ to $\cat{D}$. Let $\CompCat$ denote the full subcategory of $\SymMonCat$ spanned by the compact categories.

% \begin{theorem}
% 	Let $\cat{C}$ be a compact category. There is an equivalence of categories
% 	\[
% 		\Lax(\cat{C},\Set) \simeq (\cat{C}\backslash\CompCat)_{\text{boo}}
% 	\]
% 	between the lax functor category from $\cat{C}$ to $\Set$ equipped with the cartesian monoidal structure, and the full subcategory of the undercategory $\cat{C}\backslash\CompCat$ spanned by the bijective-on-objects functors.
% \end{theorem}
% \begin{proof}
% 	Fix a lax symmetric functor $F\colon\cat{C}\to\Set$. We can construct a compact category $\hat{F}$ and a strong bijective-on-objects functor $\tilde{F}\colon\cat{C}\to\hat{F}$ as follows:
% 	\begin{compactitem}
% 		\item The objects of $\hat{F}$ are the objects of $\cat{C}$.
% 		\item $\Hom_{\hat{F}}(A,B)=F(A^{\star}\otimes B)$.
% 		\item Composition $\Hom(A,B)\times\Hom(B,C)\to\Hom(A,C)$ is defined by
% 		\[
% 		\begin{tikzcd}[column sep=-2ex]
% 			{} & F(A^{\star}\otimes B\otimes B^{\star}\otimes C)
% 				\drar{F(\id\otimes\epsilon_B\otimes\id)} & \\
% 			F(A^{\star}\otimes B)\times F(B^{\star}\otimes C)
% 				\urar{\mu_F}
% 			&& F(A^{\star}\otimes B)
% 		\end{tikzcd}
% 		\]
% 		\item Identities $1\to\Hom(A,A)$ are defined by
% 		\[
% 		\begin{tikzcd}
% 			1 \rar{\epsilon_F} & F(I) \rar{F(\eta_A)} & F(A^{\star}\otimes A).
% 		\end{tikzcd}
% 		\]
% 		\item The tensor product
% 		\[
% 		\begin{tikzcd}
% 			\Hom(A,A')\times\Hom(B,B') \rar{\otimes}
% 			& \Hom(A\otimes B,A'\otimes B')
% 		\end{tikzcd}
% 		\]
% 		is defined by
% 		\[
% 		\begin{tikzcd}[column sep=-3ex]
% 			{} & F(A^{\star}\otimes A'\otimes B^{\star}\otimes B')
% 				\drar{F(\id\otimes\sigma\otimes\id)} & \\
% 			F(A^{\star}\otimes A')\times F(B^{\star}\otimes B')
% 				\urar{\mu_F}
% 			&& F(A^{\star}\otimes B^{\star}\otimes A'\otimes B')
% 		\end{tikzcd}
% 		\]
% 		\item $\tilde{F}$ is identity on objects, and for any $f\colon A\to B$ in $\cat{C}$, define $\tilde{F}(f)$ by
% 		\[
% 		\begin{tikzcd}
% 			1 \rar{\epsilon_F}
% 			& F(I) \rar{F(\eta_A)}
% 			& F(A^{\star}\otimes A) \rar{F(\id\otimes f)}
% 			& F(A^{\star}\otimes B)
% 		\end{tikzcd}
% 		\]
% 		\item The associator and symmetry isomorphisms of $\hat{F}$ are given by the image under $\tilde{F}$ of those in $\cat{C}$.
% 	\end{compactitem}

% 	In the other direction, suppose we are given a compact category $\hat{F}$ and a strong bijective-on-objects functor $\tilde{F}\colon\cat{C}\to\hat{F}$. Define $F$ by
% 	\begin{compactitem}
% 		\item $F(A)=\Hom_{\hat{F}}(I,A)$.
% 		\item For $f\colon A\to B$ in $\cat{C}$, define $F(f)\colon\Hom(I,A)\to\Hom(I,B)$ by post-composition with $\tilde{F}(f)$.
% 		\item $\epsilon\colon 1\to F(I)$ is defined by $\id_I\in\Hom_{\hat{F}}(I,I)$.
% 		\item $\mu\colon F(A)\times F(B)\to F(A\otimes B)$ is defined by
% 		\[
% 		\begin{tikzcd}[column sep=-3ex]
% 			{} & \Hom(I\otimes I,A\otimes B)
% 				\drar & \\
% 			\Hom(I,A)\times\Hom(I,B)
% 				\urar{\otimes_{\hat{F}}}
% 			&& \Hom(I,A\otimes B)
% 		\end{tikzcd}
% 		\]
% 	\end{compactitem}
% \end{proof}

\chapter{Profunctors}

Let $\cat{C}$ and $\cat{D}$ be categories. Recall that a profunctor $M$ from $\cat{C}$ to $\cat{D}$, written
\[
\begin{tikzcd}
	\cat{C} \ar[r,tick,"M"] & \cat{D},
\end{tikzcd}
\]
is defined to be a functor $M\colon\op{\cat{C}}\times\cat{D}\to\Set$. We can think of a profunctor as a sort of graded bimodule: for each object $c\in\cat{C}$ and $d\in\cat{D}$ there is a set $M(c,d)$ of elements in the bimodule, and given an element $m\in M(c,d)$ and morphisms $f\colon c'\to c$ in $\cat{C}$ and $g\colon d\to d'$ in $\cat{D}$, there are elements $g\cdot m\in M(c,d')$ and $m\cdot f\in F(c',d)$, such that $(g\cdot m)\cdot f=g\cdot(m\cdot f)$, and $g'\cdot(g\cdot m)=(g'\circ g)\cdot m$ and $(m\cdot f)\cdot f'=m\cdot(f\circ f')$ whenever they make sense.

If $F\colon\cat{C}'\to\cat{C}$ and $G\colon\cat{D}'\to\cat{D}$ are functors, and $M$ is a profunctor as before, then there is a profunctor $M(F,G)$ from $\cat{C}'$ to $\cat{D}'$, defined to be the composite
\[
\begin{tikzcd}
	\op{\cat{C}'}\times\cat{D}' \ar[r,"\op{F}\times G"]
		&[1.5em] \op{\cat{C}}\times\cat{D} \ar[r,"M"]
		& \Set.
\end{tikzcd}
\]
In other words, for any objects $c\in\Cat{C}'$ and $d\in\Cat{D}'$, the profunctor $M(F,G)$ has elements $M(Fc,Gd)$, and if $m\in M(Fc,Gd)$ and $g\colon d\to d'$ is a morphism in $\cat{D}'$, then the element $m\cdot g$ in $M(F,G)$ is defined by the element $m\cdot G(g)$ in $M$, and similarly for the $\cat{C}'$ action.

Given two profunctors
\[
\begin{tikzcd}
	\cat{C} \ar[r,tick,shift left,"M"] \ar[r,tick,shift right,"N"'] & \cat{D}
\end{tikzcd}
\]
define a profunctor morphism $\phi\colon M\Rightarrow N$ to be a natural transformation. In other words, for each $c\in\cat{C}$ and $d\in\cat{D}$ there is a function $\phi_{c,d}\colon M(c,d)\to N(c,d)$ such that $\phi(f\cdot m \cdot g)=f\cdot\phi(m)\cdot g$ whenever it makes sense.

There is a tensor product of profunctors: given two profunctors
\[
\begin{tikzcd}
	\cat{C} \ar[r,tick,"M"] & \cat{D} \ar[r,tick,"N"] & \cat{E}
\end{tikzcd}
\]
define the profunctor $M\otimes N$ such that for objects $c\in\cat{C}$ and $e\in\cat{E}$, $(M\otimes N)(c,e)$ is the coequalizer of the diagram
\[
\begin{tikzcd}
	\displaystyle\coprod_{d_1,d_2\in\cat{D}} M(c,d_1)\times\cat{D}(d_1,d_2)\times N(d_2,e)
		\ar[r,shift left] \ar[r,shift right]
	& \displaystyle\coprod_{d\in\cat{D}} M(c,d)\times N(d,e)
\end{tikzcd}
\]
where the two maps are given by the right action of $\cat{D}$ on $M$ and by the left action of $\cat{D}$ on $N$. We can write elements of $(M\otimes N)(c,e)$ as tensors $m\otimes n$, where $m\in M(c,d)$ and $n\in N(d,e)$ for some $d\in\cat{D}$. The coequalizer then implies that $(m\cdot f)\otimes n=m\otimes(f\cdot n)$ whenever the equation makes sense.

For any category $\cat{C}$, there is a profunctor $\Hom_{\cat{C}}\colon\op{\cat{C}}\times\cat{C}\to\Set$, and these hom profunctors act as units for the tensor product. Precisely, if $M$ is as above, there are canonical isomorphisms $\Hom_{\cat{C}}\otimes M \iso M \iso M\otimes\Hom_{\cat{D}}$.

Given a category $\cat{C}$, there is a monoidal category $\Prof(\cat{C},\cat{C})$ of profunctors from $\cat{C}$ to itself and morphisms of profunctors, with the tensor product given above and $\Hom_{\cat{C}}$ as the monoidal unit. We would now like to investigate monoids in this monoidal category.

Suppose $M\in\Prof(\cat{C},\cat{C})$ has a monoid structure. The unit is a profunctor morphism $i\colon\Hom_{\cat{C}}\to M$. So for any $f\colon c\to d$ in $\cat{C}$ there is an element $i(f)\in M(c,d)$, such that $f\cdot i(g)\cdot h = i(f\circ g\circ h)$ whenever this makes sense. The multiplication $M\otimes M\to M$ is an operation assigning to any elements $m_1\in M(c,d)$ and $m_2\in M(d,e)$ an element $m_2\bullet m_1\in M(c,e)$, which is associative, and satisfies the following equations whenever they make sense:
\begin{gather*}
	(f\cdot m_2)\bullet(m_1\cdot h) = f\cdot(m_2\bullet m_1)\cdot h \\
	(m_3\cdot g)\bullet m_1 = m_3\bullet(g\cdot m_1) \\
	m\bullet i(f) = m\cdot f \quad\text{and}\quad i(g)\bullet m = g\cdot m
\end{gather*}

\begin{lemma}
	There is an equivalence of categories $\Mon(\Prof(\cat{C},\cat{C}))\iso (\cat{C}/\Cat{Cat})_{\text{b.o.o.}}$ between the category of monoids in $\Prof(\cat{C},\cat{C})$ and the full subcategory of the coslice category $\cat{C}/\Cat{Cat}$ spanned by the bijective-on-objects functors.
\end{lemma}
\begin{proof}
	Simple to check. The unit provides the identities and the functor from $\cat{C}$, while the multiplication provides the composition.
\end{proof}

Now suppose $\cat{C}$ and $\cat{D}$ are monoidal categories. We will write
\[
	a_{c,d,e}\colon (c\otimes d)\otimes e \to c\otimes(d\otimes e), 
		\quad \lambda_c\colon I\otimes c\to c,
		\quad \rho_c\colon c\otimes I \to c 
\]
for the associator and left and right unitor isomorphisms, respectively, leaving it to context to make clear whether we are in $\cat{C}$ or $\cat{D}$.

A \emph{monoidal profunctor} $M$ from $\cat{C}$ to $\cat{D}$ is an ordinary profunctor such that the functor $M\colon \op{\cat{C}}\times\cat{D}\to\Set$ is equipped with a lax-monoidal structure, with the cartesian monoidal structure on $\Set$. In the bimodule notation, this means that there is an associative operation assigning to any elements $m_1\in M(c_1,c'_1)$ and $m_2\in M(c_2,c'_2)$ an element $m_1\boxtimes m_2\in M(c_1\otimes c_2,c'_1\otimes c'_2)$ such that
\[
	(f_1\cdot m_1\cdot g_1)\boxtimes(f_2\cdot m_2\cdot g_2) = (f_1\otimes f_2)\cdot(m_1\boxtimes m_2)\cdot(g_1\otimes g_2),
\]
as well as a distinguished element $I_M\in M(I,I)$ such that $\lambda_d\cdot(I_M\boxtimes m)\cdot\lambda^{-1}_c = m = \rho_d\cdot(m\boxtimes I_M)\cdot\rho^{-1}_c$ for any $m\in M(c,d)$.

A monoidal profunctor morphism $\phi\colon M\to N$ is simply a monoidal transformation. Spelling this out in bimodule notation, $\phi$ is an ordinary morphism of profunctors such that $\phi(m_1\boxtimes m_2)=\phi(m_1)\boxtimes\phi(m_2)$ and $\phi(I_M)=I_N$. We will denote the category of monoidal profunctors from $\cat{C}$ to $\cat{D}$ and monoidal profunctor morphisms as $\MProf(\cat{C},\cat{D})$.

A unit for a monoidal profunctor $M\in\MProf(\cat{C},\cat{C})$ is a unit $i\colon\Hom_{\cat{C}}\to M$ in $\Prof(\cat{C},\cat{C})$ such that, additionally, $i(\id_{I_{\cat{C}}})=I_M$ and $i(f\otimes g)=i(f)\boxtimes i(g)$ for any morphisms $f$ and $g$ in $\cat{C}$. Similarly, a multiplication on $M$ is as above, with the additional conditions
\begin{gather*}
	I_M\bullet I_M=I_M \\
	(m_1\boxtimes m'_1)\bullet(m_2\boxtimes m'_2) = (m_1\bullet m_2)\boxtimes(m'_1\bullet m'_2)
\end{gather*}
for any $m_1\in M(c,d)$, $m'_1\in M(c',d')$, $m_2\in M(d,e)$, and $m'_2\in M(d'e')$.

\begin{lemma}
	Let $\cat{C}$ be a monoidal category. There is an equivalence of categories $\Mon(\MProf(\cat{C},\cat{C}))\iso (\cat{C}/\Cat{MonCat})_{\text{b.o.o.}}$ between the category of monoids in $\MProf(\cat{C},\cat{C})$ and the full subcategory of the coslice category $\cat{C}/\Cat{MonCat}$ spanned by the bijective-on-objects functors.
\end{lemma}

\chapter{Compact closed categories}

Let $\cat{C}$ be a compact closed category.

\begin{proposition}
	There are functors
	\[
	\begin{tikzcd}
		\MProf(1,\cat{C}) \ar[r,shift left,"F"]
		& \MProf(\cat{C},\cat{C}) \ar[l,shift left,"U"]
	\end{tikzcd}
	\]
\end{proposition}
\begin{proof}
	For any $M\colon\cat{C}\to\Set$, define $FM\colon\op{\cat{C}}\times\cat{C}\to\Set$ by $FM(A,B)=M(A^*\otimes B)$. In the other direction, for $N\colon\op{\cat{C}}\times\cat{C}\to\Set$, define $UN(A)=N(1,A)$.
\end{proof}

\begin{proposition}
	Let $N\in\MProf(\cat{C},\cat{C})$ be a monoidal profunctor equipped with a unit $\eta\colon\Hom_{\cat{C}}\to N$. Then $N$ has a canonical multiplication $\mu\colon N\otimes N\to N$ making $N$ a monoid in $\MProf(\cat{C},\cat{C})$.
\end{proposition}
\begin{proof}
	We can define a multiplication on $N$ by the following formula: given any $n_1\in N(c,d)$ and $n_2\in N(d,e)$,
	\[
		n_2\bullet n_1 = (\id_c\otimes \eta_d)\cdot(n_1\boxtimes i(\id_{d^*})\boxtimes n_2)\cdot(\epsilon_d\otimes\id_e)
	\]
\end{proof}

\begin{proposition}
	For any $M\in\MProf(1,\cat{C})$, $FM\in\Prof(\cat{C},\cat{C})$ has a canonical unit.
\end{proposition}

\begin{corollary}
	The functor $F$ factors canonically through the category $\Mon(\MProf(\cat{C},\cat{C}))$ of monoid objects.
\end{corollary}

\begin{proposition}
	The functors $F$ and $U$ induce an equivalence of categories $\MProf(1,\cat{C})\simeq\Mon(\MProf(\cat{C},\cat{C}))$.
\end{proposition}

\begin{corollary}
	There is an equivalence of categories $\Lax(\cat{C},\Set)\simeq(\cat{C}/\Cat{CompCat})_{\text{b.o.o.}}$.
\end{corollary}

\chapter{Traced Monoidal Categories}

Recall from~\cite{JoyalStreet}
\begin{compactitem}
	\item Let $\cat{D}$ be a traced symmetric monoidal category, and $F\colon\cat{C}\to\cat{D}$ a fully faithful symmetric monoidal functor. Then $\cat{C}$ has a unique trace for which $F$ is a traced functor.
	\item Any compact category has a canonical trace, defining a functor $U\colon\Cat{CompCat}\to\Cat{TrCat}$.
	\item The Int construction $\Int\colon\Cat{TrCat}\to\Cat{CompCat}$ is left 2-adjoint to $U$. For any traced symmetric monoidal category $\cat{C}$, the unit $\cat{C}\to\Int(\cat{C})$ is fully faithful.
\end{compactitem}

\begin{lemma}
	Let $\cat{D}$ be a traced symmetric monoidal category, and $F\colon\cat{C}\to\cat{D}$ a fully faithful symmetric monoidal functor. Then, using the unique trace on $\cat{C}$ making $F$ a traced functor, the functor $\Int(\cat{C})\to\cat{D}$ which is adjunct to $F$ is also fully faithful.
\end{lemma}

\begin{proposition}
	Let $\cat{C}$ be a traced symmetric monoidal category. Then the Int construction provides an equivalence of categories
	\[
		(\cat{C}/\Cat{TrCat})_{\text{b.o.o.}} \simeq (\Int(\cat{C})/\Cat{CompCat})_{\text{b.o.o.}}
	\]
\end{proposition}